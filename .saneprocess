# SaneProcess compliance manifest
name: SaneHosts
type: macos_app
scheme: SaneHosts
project: SaneHosts.xcodeproj
bundle_id: com.mrsane.SaneHosts

build:
  workspace: SaneHosts.xcworkspace

tests:
  unit_target: SaneHostsFeatureTests
  ui_target: SaneHostsUITests
  use_test_plan: true

release:
  team_id: M78L6FXD48
  signing_identity: "Developer ID Application"
  dist_host: dist.sanehosts.com
  site_host: sanehosts.com
  r2_bucket: sanebar-downloads
  use_sparkle: true
  min_system_version: "14.0"
  verify_staple: true
  version_bump_cmd: "sed -i '' \"s/^MARKETING_VERSION = .*/MARKETING_VERSION = ${version}/\" Config/Shared.xcconfig && sed -i '' \"s/^CURRENT_PROJECT_VERSION = .*/CURRENT_PROJECT_VERSION = ${project_version}/\" Config/Shared.xcconfig"
  version_bump_restore_cmd: "git -C ${PROJECT_ROOT} restore --staged --worktree Config/Shared.xcconfig 2>/dev/null || git -C ${PROJECT_ROOT} checkout -- Config/Shared.xcconfig 2>/dev/null || true"
  version_bump_files:
    - Config/Shared.xcconfig
  dmg:
    volume_icon: Resources/DMGIcon.icns
    file_icon: Resources/DMGIcon.icns
    window_size: "600 428"
    app_icon_pos: "150 190"
    drop_pos: "450 190"
    no_internet_enable: true
  archive_extra_args:
    - DEVELOPMENT_TEAM=M78L6FXD48
    - "CODE_SIGN_IDENTITY=Developer ID Application"
    - CODE_SIGN_STYLE=Manual

commands:
  verify: ./scripts/SaneMaster.rb verify
  test_mode: ./scripts/SaneMaster.rb tm
  lint: ./scripts/SaneMaster.rb lint
  clean: ./scripts/SaneMaster.rb clean
  launch: ./scripts/SaneMaster.rb launch
  logs: ./scripts/SaneMaster.rb logs

docs:
  - CLAUDE.md
  - README.md
  - DEVELOPMENT.md
  - ARCHITECTURE.md
  - SESSION_HANDOFF.md

mcps:
  - apple-docs
  - context7
  - github
  - xcode

appstore:
  enabled: true
  app_id: "6759330900"
  configuration: Release
  platforms: [macos]
  category: public.app-category.utilities
  age_rating: "4+"
  privacy_policy_url: "https://sanehosts.com/privacy"
  support_url: "https://sanehosts.com/support"
  review_notes: "SaneHosts updates /etc/hosts for block profiles. The preferred path uses the bundled privileged helper. If helper registration is unavailable, the app falls back to AppleScript with administrator privileges to write hosts content and flush DNS. This fallback can trigger Automation/Apple Events permission prompts."
  screenshots:
    macos: website/screenshot.png
  build_flags:
    - 'OTHER_SWIFT_FLAGS=$(inherited) -D APP_STORE'
    - CODE_SIGN_ENTITLEMENTS=Config/SaneHosts-AppStore.entitlements
    - CODE_SIGN_STYLE=automatic
    - 'INFOPLIST_KEY_SUFeedURL='
    - 'INFOPLIST_KEY_SUEnableAutomaticChecks='
    - 'INFOPLIST_KEY_SUPublicEDKey='
  strip_frameworks:
    - Sparkle.framework
  contact:
    name: "Stephan Joseph"
    phone: "+17277589785"
    email: "hi@saneapps.com"

website: false
